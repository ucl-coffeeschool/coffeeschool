<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Lesson 3 - Coffee School</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link href="css/main.css" rel="stylesheet">
    <link href="css/prism.css" rel="stylesheet">
    <script src="js/prism.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>
    <!-- nav stuff. -->
    <nav>
        <a href="index.html">Home</a>
        <a href="sections.html" class="active">Sections</a>
        <a href="about.html">About</a>
    </nav>

    <div class="nagbar" style="display:none">
        <p>Your code doesn't seem to do what we're looking for. Check it and try again!</p>
        <i class="fa fa-close"></i>
    </div>

    <!-- Main content. -->
    <div class="overlay" style="display:none">
        <span class="closeButton"><i class="fa fa-close"></i></span>
            <h1>Lesson completed!</h1>
            <h2>Give yourself a pat on the back.</h2>
            <a href="section-Using Game States-lesson-part2-1.html">Next lesson!</a>
    </div>
    <div class="main">
        <header>
            <div id="menu-button"><i class="fa fa-bars"></i></div>
            <h1>Coffee School <i class="fa fa-code"></i><em></em></h1>
        </header>
        <div class="container">
            <div class="flex-container div-half">
                <h2>Code Editor <button id="code-compile"><i class="fa fa-play"></i> Update</button><span id="syntax-msg"></span>
                        <button id="nextLesson" onClick="window.location = 'section-Using Game States-lesson-part2-1.html'"><i class="fa fa-arrow-right"></i> Next Lesson</button>
                        </h2>

                <div id="codeEditor">// Creating environment variables
var playerSize = 10;
var sceneWidth = 300, sceneHeight = 150;
var groundHeight = 10;
var playAreaHeight = (sceneHeight - groundHeight);
// Create the variables to track player movement
var playerVel = 0; // Stores the player&#x27;s velocity
var g = 0.4;       // The constant acceleration cause by &quot;gravity&quot;
// Object width!
var objectWidth = 2 * playerSize;
// Obstacle Counter
var obstacleCounter = 0;

// Sets the background colour
Crafty.background(&quot;#ADD8E6&quot;);

Crafty.defineScene(&quot;Start&quot;, function() {
  // Start screen stuff here
});

// Enter the start scene
Crafty.enterScene(&quot;Start&quot;);

Crafty.defineScene(&quot;Game&quot;, function() {
  // Create the ground!
  Crafty.e(&quot;Solid, 2D, DOM, Color&quot;)
      .attr({x: 0,
             y: playAreaHeight,
             w: sceneWidth,
             h: groundHeight})
      .color(&quot;#00ff00&quot;);

  // Create our player&#x27;s base entity
  Crafty.e(&quot;Collision, 2D, DOM, Color&quot;) // Specifying the components to add
      .attr({x: 30, y: 30, w: playerSize, h: playerSize}) // Specifying the dimensions and the point to draw from
      .checkHits(&quot;Solid&quot;)
      .color(&quot;#ff0000&quot;) // Specifying the colour of the rectangle
      .bind(&quot;EnterFrame&quot;, function() { // Binds the &quot;EnterFrame&quot; event to the entity
          if(this.y &lt; 0) {
            playerVel = g; // Prevent the player from going above the game screen
          }
          else {
            playerVel += g; // Adds the &quot;gravitational acceleration&quot; to the player&#x27;s velocity
          }

          this.y += playerVel; // Change the player entities y position based on the player velocity
      })
      .bind(&quot;KeyDown&quot;, function(event) { // Binds the &quot;KeyDown&quot; event to our player entity
          if(event.key == Crafty.keys.SPACE){ // If the key is the spacebar then &quot;flap&quot;
              playerVel = -5; // Sets the player&#x27;s speed and direction to go upwards
          }
      })
      .bind(&quot;HitOn&quot;, function() {
          Crafty.pause();
      })
      .bind(&quot;EnterFrame&quot;, function() {
          Crafty(&quot;Obstacle&quot;).each(function() {
              if(this.x &lt; -objectWidth) {
                  this.destroy();
              }
              else {
                  this.x -= 3;
              }

          });

          if(obstacleCounter &gt; 100){
              obstacleCounter = 0;
              newObstacle();
          }

          obstacleCounter++;

      });
});


function newObstacle()
{
    var randomHeight = Math.floor((Math.random() * (sceneHeight/2)) + (sceneHeight/3));
    var bottomOfTopHalf = playAreaHeight - randomHeight;
    var topOfBottomHalf = bottomOfTopHalf + (4 * playerSize);

    // Create the top half of the pipe
    Crafty.e(&quot;Obstacle, 2D, DOM, Color, Solid&quot;)
        .attr({x: sceneWidth,
               y: 0,
               w: objectWidth,
               h: bottomOfTopHalf})
        .color(&quot;#003319&quot;);

    // Create the bottom half of the pipe
    Crafty.e(&quot;Obstacle, 2D, DOM, Color, Solid&quot;)
        .attr({x: sceneWidth,
               y: topOfBottomHalf,
               w: objectWidth,
               h: playAreaHeight - topOfBottomHalf})
        .color(&quot;#003319&quot;);
}
</div>
            </div>
            <div class="flex-container div-half">
                <div class="flex-container">
                    <h2>Preview</h2>
                    <div class="div-content" id="game-container">
                    </div>
                    <h2>Console Log:</h2>
                    <div class="div-content" id="log-div"> </div>
                    <div class="div-content">
                        <h1></h1>
                        <hr>
<h2 id="title-game-lesson-three-using-game-states">title: Game Lesson Three - Using Game States</h2>
<h3 id="goal-adding-graphics-to-the-start-screen-and-launching-the-main-game">Goal: Adding graphics to the start screen and launching the main game</h3>
<p>Now that there is a “Start” scene we can fill it with graphics and make the player able to launch into the game from it. You can have a bit of a mess about with the graphics here as they aren’t too important for the game’s functionality.</p>
<p>Usually this style of game has the player’s avatar flying in the air until they start the game, so that’s what I’m going to show you! To make it look like we’re in the game scene but haven’t started playing yet we just need to place the player’s avatar and the ground in it.</p>
<p>However for the start screen no fancy behaviour needs to be added, so we can just make entities inside our <code>defineScene</code> function:</p>
<pre><code class="lang-javascript">Crafty.defineScene(&quot;Start&quot;, function() {

    // &quot;Dummy&quot; player
    Crafty.e(&quot;2D, DOM, Color&quot;)
        .attr({x: 30,y: 30, w: playerSize, h: playerSize})
        .color(&quot;#ff0000&quot;);

    // Dummy ground
    Crafty.e(&quot;2D, DOM, Color&quot;)
        .attr({x: 0, y: playAreaHeight, w: sceneWidth, h: groundHeight})
        .color(&quot;#00ff00&quot;);
});
</code></pre>
<p>Now that the visuals are mocked up we can add in an entity which uses the <code>Text</code> component to display a message about how to start. If we want to start the game when the player hits the spacebar then we can bind a <code>KeyDown</code> event to the mockup of the player and have the message tell the player how to start.</p>
<p>To put our text message in the middle of the screen we can add in this entity in the scene code block:</p>
<pre><code class="lang-javascript">Crafty.e(&quot;2D, DOM, Text&quot;)
    .attr({x: sceneWidth/2, y: sceneHeight/2, w: 100, h: 20})
    .text(&quot;Press &#39;space&#39; to begin&quot;)
    .css({&quot;text-align&quot;:&quot;center&quot;});
</code></pre>
<p>To then load the “Game” scene when the player hits the spacebar we just bind the <code>KeyDown</code> event to the “dummy” player in the “Start” scene like we did for the player jump in the real game.</p>
<p>The only difference is that instead of jumping we use:</p>
<pre><code class="lang-javascript">Crafty.enterScene(&quot;Game&quot;);
</code></pre>
<p>If you try this out you should now have a welcoming start screen for your game!</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script defer>
        $(document).ready(function() {
    $('#nextLesson, #sectionButton').addClass("lessonComplete");
});

var codeTest = function() {
    return "notest";
}

    </script>
    <!-- Editor (ace) -->

    <script type="text/javascript" src="https://rawgithub.com/craftyjs/Crafty/release/dist/crafty-min.js"></script>
    <script src="https://cdn.jsdelivr.net/ace/1.2.3/min/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/main.js" type="text/javascript" charset="utf-8"></script>
</body>

</html>
